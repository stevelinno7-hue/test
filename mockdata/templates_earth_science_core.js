(function(global){
    'use strict';
    console.log("ğŸŒ [Earth Science V9.0] åœ°ç§‘æ ¸å¿ƒé¡Œåº« (å¤©æ–‡/åœ°è³ª/æ°£è±¡) å•Ÿå‹•...");

    window.__EARTH_SCI_REPO__ = window.__EARTH_SCI_REPO__ || {};
    const Utils = { shuffle: (arr) => arr.sort(() => Math.random() - 0.5) };

    const earthDB = [
        // å¤©æ–‡
        {q:"åœ°çƒå››å­£è®ŠåŒ–çš„ä¸»è¦åŸå› æ˜¯ï¼Ÿ", a:"åœ°è»¸å‚¾æ–œèˆ‡å…¬è½‰", o:["åœ°çƒè‡ªè½‰","å¤ªé™½è·é›¢è®ŠåŒ–","æœˆçƒå¼•åŠ›"], t:"å¤©æ–‡"},
        {q:"æ—¥é£Ÿç™¼ç”Ÿæ™‚ï¼Œæœˆçƒçš„ä½ç½®åœ¨ï¼Ÿ", a:"å¤ªé™½èˆ‡åœ°çƒä¹‹é–“", o:["åœ°çƒèˆ‡å¤ªé™½ä¹‹é–“","åœ°çƒå¾Œæ–¹","èˆ‡å¤ªé™½å‚ç›´"], t:"å¤©æ–‡"},
        {q:"å¤ªé™½ç³»ä¸­é«”ç©æœ€å¤§çš„è¡Œæ˜Ÿæ˜¯ï¼Ÿ", a:"æœ¨æ˜Ÿ", o:["åœŸæ˜Ÿ","åœ°çƒ","å¤ªé™½"], t:"å¤©æ–‡"},
        
        // åœ°è³ª
        {q:"æ¿å¡Šå¼µè£‚è™•å¸¸è¦‹çš„åœ°å½¢æ˜¯ï¼Ÿ", a:"ä¸­æ´‹è„Š", o:["æµ·æº","è¤¶çšºå±±è„ˆ","å³¶å¼§"], t:"åœ°è³ª"},
        {q:"å°ç£åœ°éœ‡é »ç¹çš„ä¸»è¦åŸå› æ˜¯ï¼Ÿ", a:"ä½æ–¼æ¿å¡Šäº¤ç•Œå¸¶", o:["ç«å±±æ´»å‹•å¤š","éåº¦æŠ½å–åœ°ä¸‹æ°´","æ°£å€™è®Šé·"], t:"åœ°è³ª"},
        {q:"å¤§ç†å²©æ˜¯ç”±å“ªç¨®å²©çŸ³è®Šè³ªè€Œä¾†ï¼Ÿ", a:"çŸ³ç°å²©", o:["èŠ±å´—å²©","ç ‚å²©","é å²©"], t:"å²©çŸ³"},
        {q:"ä¸‹åˆ—ä½•è€…å±¬æ–¼ç«æˆå²©ï¼Ÿ", a:"ç„æ­¦å²©", o:["å¤§ç†å²©","çŸ³ç°å²©","ç ‚å²©"], t:"å²©çŸ³"},

        // æ°£è±¡èˆ‡æµ·æ´‹
        {q:"å¤§æ°£ä¸­èƒ½å¸æ”¶ç´«å¤–ç·šï¼Œä¿è­·ç”Ÿç‰©çš„æ˜¯ï¼Ÿ", a:"è‡­æ°§å±¤", o:["äºŒæ°§åŒ–ç¢³","æ°´æ°£","æ°®æ°£"], t:"å¤§æ°£"},
        {q:"å¤©æ°£ç¾è±¡ï¼ˆå¦‚é›²ã€é›¨ï¼‰ä¸»è¦ç™¼ç”Ÿåœ¨å“ªä¸€å±¤ï¼Ÿ", a:"å°æµå±¤", o:["å¹³æµå±¤","ä¸­æ°£å±¤","å¢æº«å±¤"], t:"å¤§æ°£"},
        {q:"åŒ—åŠçƒé«˜æ°£å£“ä¸­å¿ƒçš„æ°£æµæ–¹å‘ç‚ºï¼Ÿ", a:"é †æ™‚é‡å‘å¤–", o:["é€†æ™‚é‡å‘å…§","é †æ™‚é‡å‘å…§","é€†æ™‚é‡å‘å¤–"], t:"æ°£è±¡"},
        {q:"é€ æˆæµ·æ´‹æ½®æ±ç¾è±¡çš„ä¸»è¦å¤©é«”å¼•åŠ›ä¾†è‡ªï¼Ÿ", a:"æœˆçƒ", o:["å¤ªé™½","ç«æ˜Ÿ","é‡‘æ˜Ÿ"], t:"æµ·æ´‹"},
        {q:"å°ç£å†¬å­£ä¸»è¦çš„ç››è¡Œé¢¨æ˜¯ï¼Ÿ", a:"æ±åŒ—å­£é¢¨", o:["è¥¿å—å­£é¢¨","è½å±±é¢¨","é¢±é¢¨"], t:"æ°£è±¡"}
    ];

    // ç”Ÿæˆä¸€èˆ¬é¡Œ
    earthDB.forEach((item, idx) => {
        const id = `earth_core_${idx}`;
        const tags = ["earth_science", "åœ°ç§‘", item.t, "åœ‹ä¹"];
        
        const func = () => {
            const opts = Utils.shuffle([item.a, ...item.o]);
            return {
                question: `ã€${item.t}ã€‘${item.q}`,
                options: opts,
                answer: opts.indexOf(item.a),
                explanation: [`æ­£ç¢ºç­”æ¡ˆï¼š${item.a}`, ``],
                subject: "earth_science", tags: tags
            };
        };
        window.__EARTH_SCI_REPO__[id] = { func, tags, subject: "earth_science" };
    });

    // ç”Ÿæˆåœ–è¡¨åˆ¤æ–·é¡Œ (æ¨¡æ“¬)
    earthDB.forEach((item, idx) => {
        const id = `earth_fig_${idx}`;
        const tags = ["earth_science", "åœ°ç§‘", item.t, "åœ‹ä¹"];
        window.__EARTH_SCI_REPO__[id] = {
            func: () => {
                const opts = Utils.shuffle([item.a, ...item.o]);
                return {
                    question: `ã€${item.t}ã€‘ æ ¹æ“šé™„åœ–ï¼Œè«‹å•æ­¤ç¾è±¡æˆ–æ§‹é€ ç‚ºï¼Ÿ`,
                    options: opts,
                    answer: opts.indexOf(item.a),
                    explanation: [`åœ–ç¤ºç‚º ${item.a} çš„ç‰¹å¾µã€‚`],
                    subject: "earth_science", tags: tags
                };
            }, tags, subject: "earth_science"
        };
    });

})(window);
