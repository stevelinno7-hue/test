(function(global){
    'use strict';
    console.log("ğŸŒ [Geography V9.5] åœ°ç†ç§‘ç²¾æº–å°é½Šç‰ˆ (å«GIS/å°ç£/ä¸­åœ‹/ä¸–ç•Œ) å•Ÿå‹•...");
    window.__GEOGRAPHY_REPO__ = window.__GEOGRAPHY_REPO__ || {};

    const Utils = { shuffle: (arr) => arr.sort(() => Math.random() - 0.5) };

    // ==========================================
    // 1. åœ‹ä¸ƒï¼šå°ç£åœ°å½¢èˆ‡æ°£å€™ (å°æ‡‰èª²ç¶±ï¼šåœ°å½¢, æ°£å€™, ä½ç½®)
    // ==========================================
    const twGeo = [
        {q:"å°ç£å“ªä¸€æ¢å±±è„ˆè¢«ç¨±ç‚ºã€Œå°ç£å±‹è„Šã€ï¼Œæ˜¯ä¸»è¦çš„åˆ†æ°´å¶ºï¼Ÿ", a:"ä¸­å¤®å±±è„ˆ", o:["é›ªå±±å±±è„ˆ","ç‰å±±å±±è„ˆ","æµ·å²¸å±±è„ˆ"], t:["åœ°å½¢","å°ç£","åœ‹ä¸ƒ"]},
        {q:"å°ç£å†¬å­£ç››è¡Œçš„æ±åŒ—å­£é¢¨ï¼Œå®¹æ˜“åœ¨è¿é¢¨é¢é€ æˆé™é›¨ï¼Œä¾‹å¦‚ï¼Ÿ", a:"åŸºéš†ã€å®œè˜­", o:["é«˜é›„ã€å°å—","å°ä¸­ã€å½°åŒ–","å˜‰ç¾©ã€é›²æ—"], t:["æ°£å€™","å°ç£","åœ‹ä¸ƒ"]},
        {q:"ä½æ–¼å°ç£æœ€åŒ—ç«¯çš„å²¬è§’æ˜¯ï¼Ÿ", a:"å¯Œè²´è§’", o:["éµé‘¾é¼»","ä¸‰è²‚è§’","é¼»é ­è§’"], t:["ä½ç½®","å°ç£","åœ‹ä¸ƒ"]},
        {q:"å°ç£å“ªç¨®åœ°å½¢æ˜¯ç”±æ¿å¡Šæ“ å£“éš†èµ·æ‰€å½¢æˆçš„ï¼Ÿ", a:"å±±åœ°", o:["å°åœ°","ç›†åœ°","å¹³åŸ"], t:["åœ°å½¢","å°ç£","åœ‹ä¸ƒ"]}
    ];
    twGeo.forEach((item,i) => register(item, `geo_tw_${i}`));

    // ==========================================
    // 2. åœ‹å…«ï¼šä¸­åœ‹èˆ‡æ±äº (å°æ‡‰èª²ç¶±ï¼šä¸­åœ‹, äºæ´²)
    // ==========================================
    const cnGeo = [
        {q:"ä¸­åœ‹åœ°å‹¢è¥¿é«˜æ±ä½ï¼Œå‘ˆç¾ä¸‰ç´šéšæ¢¯ç‹€ï¼Œé€™å°æ°£å€™çš„ä¸»è¦å½±éŸ¿æ˜¯ï¼Ÿ", a:"åˆ©æ–¼æµ·æ´‹æ°´æ°£æ·±å…¥å…§é™¸", o:["é˜»æ“‹æ°´æ°£é€²å…¥","é€ æˆè¥¿éƒ¨å¤šé›¨","ä½¿æ²³æµå¤šå‘è¥¿æµ"], t:["ä¸­åœ‹","è‡ªç„¶","åœ‹å…«"]},
        {q:"ä¸­åœ‹çš„äººå£åˆ†å¸ƒç•Œç·šã€Œé»‘æ²³â€”é¨°è¡ç·šã€ï¼Œé¡¯ç¤ºäººå£é›†ä¸­æ–¼ï¼Ÿ", a:"æ±å—éƒ¨", o:["è¥¿åŒ—éƒ¨","è¥¿å—éƒ¨","æ±åŒ—éƒ¨"], t:["ä¸­åœ‹","äººæ–‡","åœ‹å…«"]},
        {q:"é»ƒæ²³ä¸‹æ¸¸å› æ³¥æ²™æ·¤ç©åš´é‡ï¼Œå½¢æˆç‰¹æ®Šçš„ä»€éº¼æ™¯è§€ï¼Ÿ", a:"åœ°ä¸Šæ²³ (æ‡¸æ²³)", o:["ä¸‰è§’æ´²","å³½è°·","é˜ä¹³çŸ³æ´"], t:["ä¸­åœ‹","è‡ªç„¶","åœ‹å…«"]},
        {q:"æ±å—äºåœ‹å”ä¸­ï¼Œå”¯ä¸€çš„å…§é™¸åœ‹å®¶æ˜¯ï¼Ÿ", a:"å¯®åœ‹", o:["æ³°åœ‹","è¶Šå—","æŸ¬åŸ”å¯¨"], t:["äºæ´²","åœ‹å…«"]}
    ];
    cnGeo.forEach((item,i) => register(item, `geo_cn_${i}`));

    // ==========================================
    // 3. åœ‹ä¹ï¼šä¸–ç•Œåœ°ç† (å°æ‡‰èª²ç¶±ï¼šæ­æ´², ç¾æ´², æ°£å€™)
    // ==========================================
    const worldGeo = [
        {q:"æ­æ´²æ°£å€™æ·±å—å“ªç¨®é¢¨å‘å½±éŸ¿ï¼Œå› æ­¤æº«å’Œæ¿•æ½¤ï¼Ÿ", a:"è¥¿é¢¨", o:["ä¿¡é¢¨","å­£é¢¨","æ¥µåœ°æ±é¢¨"], t:["æ­æ´²","æ°£å€™","åœ‹ä¹"]},
        {q:"æ“æœ‰ã€Œåƒæ¹–åœ‹ã€ä¹‹ç¨±çš„åŒ—æ­åœ‹å®¶æ˜¯ï¼Ÿ", a:"èŠ¬è˜­", o:["æŒªå¨","ç‘å…¸","ä¸¹éº¥"], t:["æ­æ´²","åœ‹ä¹"]},
        {q:"ä½æ–¼å—ç¾æ´²ï¼Œä¸–ç•Œæµé‡æœ€å¤§ã€æµåŸŸæœ€å»£çš„æ²³æµæ˜¯ï¼Ÿ", a:"äºé¦¬éœæ²³", o:["å°¼ç¾…æ²³","å¯†è¥¿è¥¿æ¯”æ²³","é•·æ±Ÿ"], t:["ç¾æ´²","ä¸­å—ç¾","åœ‹ä¹"]},
        {q:"å“ªç¨®æ°£å€™é¡å‹çš„ç‰¹å¾µæ˜¯ã€Œå¤ä¹¾å†¬é›¨ã€ï¼Ÿ", a:"åœ°ä¸­æµ·å‹æ°£å€™", o:["æº«å¸¶æµ·æ´‹æ€§","ç†±å¸¶é›¨æ—","æº«å¸¶å­£é¢¨"], t:["æ°£å€™","åœ‹ä¹"]}
    ];
    worldGeo.forEach((item,i) => register(item, `geo_wd_${i}`));

    // ==========================================
    // 4. é«˜ä¸­ï¼šé€šè«–åœ°ç† (å°æ‡‰èª²ç¶±ï¼šGIS, åœ°åœ–, ç½å®³)
    // ==========================================
    const highGeo = [
        {q:"åˆ©ç”¨é›»è…¦è»Ÿé«”å„²å­˜ã€è™•ç†åŠåˆ†æç©ºé–“è³‡æ–™çš„ç³»çµ±ç¨±ç‚ºï¼Ÿ", a:"åœ°ç†è³‡è¨Šç³»çµ± (GIS)", o:["å…¨çƒè¡›æ˜Ÿå®šä½ç³»çµ± (GPS)","é™æ„Ÿæ¢æ¸¬ (RS)","Google Maps"], t:["GIS","é«˜ä¸€"]},
        {q:"åœ¨GISåˆ†æä¸­ï¼Œè‹¥è¦å°‹æ‰¾ã€Œå¡åº¦å°ä¸”è¿‘æ°´æºã€çš„åœ°é»ï¼Œæ‡‰ä½¿ç”¨ï¼Ÿ", a:"ç–Šåœ–åˆ†æ", o:["è¦–åŸŸåˆ†æ","è·¯ç¶²åˆ†æ","åœ°å½¢åˆ†æ"], t:["GIS","é«˜ä¸€"]},
        {q:"å“ªç¨®æŠ•å½±æ³•ç¹ªè£½çš„åœ°åœ–ï¼Œé«˜ç·¯åº¦åœ°å€é¢ç©è®Šå½¢æœ€åš´é‡ï¼Ÿ", a:"éº¥å¡æ‰˜æŠ•å½±", o:["è˜­ä¼¯ç‰¹æŠ•å½±","ç­‰ç©æŠ•å½±","ç¾…è³“æ£®æŠ•å½±"], t:["åœ°åœ–","é«˜ä¸€"]},
        {q:"ä¸‹åˆ—ä½•è€…å±¬æ–¼ã€Œäººç‚ºèª˜ç™¼ã€çš„å¤©ç„¶ç½å®³ï¼Ÿ", a:"å±±å¡åœ°æ¿«å¢¾å°è‡´åœŸçŸ³æµ", o:["æ¿å¡Šé‹å‹•å¼•ç™¼åœ°éœ‡","é¢±é¢¨å¸¶ä¾†è±ªé›¨","ç«å±±çˆ†ç™¼"], t:["ç½å®³","é«˜ä¸€"]}
    ];
    highGeo.forEach((item,i) => register(item, `geo_high_${i}`));

    // --- è¨»å†Š helper ---
    function register(item, id) {
        // é—œéµï¼šå°‡é¡Œç›®è‡ªå¸¶çš„æ¨™ç±¤åŠ å…¥ï¼Œä¸¦åŠ ä¸Š "geography"
        const finalTags = ["geography", "åœ°ç†", ...item.t];
        window.__GEOGRAPHY_REPO__[id] = {
            func: () => {
                const opts = Utils.shuffle([item.a, ...item.o]);
                return {
                    question: `ã€åœ°ç†ã€‘${item.q}`,
                    options: opts, answer: opts.indexOf(item.a),
                    explanation: [`æ­£ç¢ºç­”æ¡ˆï¼š${item.a}`, `} diagram]`],
                    subject: "geography", tags: finalTags
                };
            }, tags: finalTags, subject: "geography"
        };
    }
})(window);
